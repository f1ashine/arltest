name: Ubuntu
on:
  push:
    branches:
      - master
#   schedule:
#     - cron: '0 0 * * *'
#     - cron: '0 6 * * *'
#     - cron: '0 12 * * *'
#     - cron: '0 18 * * *'
jobs:
  Ubuntu:
    runs-on: ubuntu-latest
    steps:
    - name: arltest
      uses: actions/checkout@master
    
    - name: operations
      run: |
          pip3 install pycryptodome
          echo $(date +%F%n%T) > res.txt
          pip3 list >> res.txt
          echo $(date +%F%n%T) >> res.txt
      shell: bash
    
    - name: create changes
      run: |
          git add res.txt

    - name: Commit results to Github
      run: |
          git config --local user.email "xxx@xxx.io"
          git config --global user.name "xxx"
          git commit -m "Scan-Actions report" -a --allow-empty

    - name: Push changes
      uses: ad-m/github-push-action@master
      with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: ${{ github.ref }}
